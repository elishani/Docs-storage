(this["webpackJsonpdocs-storage"]=this["webpackJsonpdocs-storage"]||[]).push([[0],{333:function(e,t,a){e.exports=a(762)},338:function(e,t,a){},339:function(e,t,a){},760:function(e,t,a){},762:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(45),c=a.n(r),i=(a(338),a(25)),o=a(34),s=a(36),u=a(35),d=a(14),h=a(37),m=a(764),f=a(765),g=function(e){function t(e){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props;e.activeUser,e.handleLogout;return l.a.createElement("div",null,l.a.createElement(m.a,null,l.a.createElement("h1",null,"Documents storage"),l.a.createElement("p",null,"One place for all your documents"),l.a.createElement("p",null,l.a.createElement(f.a,{variant:"success",href:"#/login"},"Login"))))}}]),t}(n.Component),p=a(157),v=(a(339),a(766)),b=a(770),E=a(76),w=a(125),O=a(31),j=a.n(O),C=function e(t){Object(i.a)(this,e),this.id=t.id,this.email=t.get("email"),this.fname=t.get("fname"),this.lname=t.get("lname")},k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={email:"elishani50@gmail.com",pwd:"123",showInvalidLoginError:!1,redirectToDocsPage:!1},a.handleInputChange=a.handleInputChange.bind(Object(d.a)(a)),a.login=a.login.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(p.a)({},n,a))}},{key:"login",value:function(){var e=this,t=this.props.handleLogin,a=this.state,n=a.email,l=a.pwd;j.a.User.logIn(n,l).then((function(a){var n=new C(a);console.log("Logged in user",n),t(n),e.setState({redirectToDocsPage:!0})})).catch((function(t){console.error("Error while logging in user",t),e.setState({showInvalidLoginError:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.pwd,n=e.showInvalidLoginError;if(e.redirectToDocsPage)return l.a.createElement(E.a,{to:"/docs"});var r=n?l.a.createElement(v.a,{variant:"danger"},"Invalid email or password!"):null;return l.a.createElement("div",null,l.a.createElement("div",{className:"p-login"},l.a.createElement("div",{className:"main"},l.a.createElement("h1",null,"Welcome to "),l.a.createElement("h1",null,"Documents Storage"),l.a.createElement("p",null,"or ",l.a.createElement(w.b,{to:"/signup"},"Create a new account")),r,l.a.createElement(b.a,null,l.a.createElement(b.a.Group,{controlId:"formBsicaEmail"},l.a.createElement(b.a.Label,null,"Email adderess"),l.a.createElement(b.a.Control,{name:"email",value:t,type:"email",placeholder:"Enter Email",onChange:this.handleInputChange})),l.a.createElement(b.a.Group,{controlId:"formBsicaPassword"},l.a.createElement(b.a.Label,null,"Pssword"),l.a.createElement(b.a.Control,{name:"pwd",value:a,type:"Password",placeholder:"Password",onChange:this.handleInputChange})),l.a.createElement(f.a,{vriant:"success",type:"button",block:!0,onClick:this.login},"Login")))))}}]),t}(l.a.Component),y=a(91),L=a.n(y),P=a(768),N=a(771),S=a(772),x=function(e){function t(e){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.activeUser,t=e?l.a.createElement(N.a.Link,{href:"#/docs"},"Docs"):null,a=e?null:l.a.createElement(N.a.Link,{href:"#/signup"},"Singup"),n=e?null:l.a.createElement(N.a.Link,{href:"#/login"},"Login"),r=e?l.a.createElement(N.a.Link,{href:"#/"},"Logout"):null;return l.a.createElement(S.a,{bg:"light",expand:"lg"},l.a.createElement(S.a.Brand,null,l.a.createElement("h1",null,"Documents Cluster")),l.a.createElement(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(S.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(N.a,{className:"mr-auto"},t),l.a.createElement(N.a,{className:"ml-auto"},a,n,r)))}}]),t}(n.Component),I=a(330),F=function e(t){Object(i.a)(this,e),this.id=t.id,this.name=t.get("name"),this.parent=t.get("parent")},U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={data:{},pdfFiles:[]},a.onToggle=a.onToggle.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,l,r,c,i;return L.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=j.a.Object.extend("folder"),t=new j.a.Query(e),o.next=4,L.a.awrap(t.find());case 4:for(a=o.sent,n=a.map((function(e){return new F(e)})),l={name:"root",toggled:!0,children:[]},r=0;r<n.length;r++)if(!n[r].parent){for(c={name:n[r].name,id:n[r].id,children:[]},i=0;i<n.length;i++)n[i].parent===n[r].id&&c.children.push({name:n[i].name,id:n[i].id});l.children.push(c)}this.setState({data:l});case 9:case"end":return o.stop()}}),null,this)}},{key:"onToggle",value:function(e,t){console.log(e);var a=this.state,n=a.cursor,l=a.data;n&&this.setState((function(){return{cursor:n,active:!1}})),e.active=!0,e.children?e.toggled=t:this.props.handlePdf(e.id),this.setState((function(){return{cursor:e,data:Object.assign({},l)}}))}},{key:"render",value:function(){var e=this.state,t=e.data;e.pdfFiles.map((function(e){return l.a.createElement("div",null,l.a.createElement("a",{href:e.get("file")._url,target:"_blank"},e.get("name")))}));return l.a.createElement("div",null,l.a.createElement(I.Treebeard,{data:t,onToggle:this.onToggle}))}}]),t}(n.Component),T=(a(760),a(769)),B=a(767),D=a(327),M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={name:"",file:void 0},a.handleInputChange=a.handleInputChange.bind(Object(d.a)(a)),a.createPdf=a.createPdf.bind(Object(d.a)(a)),a.handleFileChange=a.handleFileChange.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleFileChange",value:function(e){var t;t=e.target.files[0]?{file:e.target.files[0]}:{name:"",file:void 0},this.setState({file:t})}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(p.a)({},n,a))}},{key:"createPdf",value:function(){var e=this.state,t=e.name,a={parent:e.parent,name:t,file:e.file};this.props.handleNewPdf(a),this.props.handleClose(),this.setState({name:"",file:void 0})}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.handleClose,n=this.state,r=n.name;n.file;return l.a.createElement(T.a,{show:t,onHide:a},l.a.createElement(T.a.Header,{closeButton:!0},l.a.createElement(T.a.Title,null,"New PDF")),l.a.createElement(T.a.Body,null,l.a.createElement(b.a,null,l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Pdf name"),l.a.createElement(b.a.Control,{name:"name",value:r,type:"text",placeholder:"Enter pdf name",onChange:this.handleInputChange})),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Pdf page"),l.a.createElement(B.a,null,l.a.createElement(D.a,null,l.a.createElement(b.a.Control,{type:"file",onChange:this.handleFileChange})))))),l.a.createElement(T.a.Footer,null,l.a.createElement(f.a,{variant:"secondary",onClick:a},"Cancel"),l.a.createElement(f.a,{variant:"success",onClick:this.createPdf},"Create")))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={showNewPdfModal:!1},a.state={pdfFiles:[]},a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.handleNewPdf=a.handleNewPdf.bind(Object(d.a)(a)),a.handlePdf=a.handlePdf.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handlePdf",value:function(e){var t,a,n,l,r,c;return L.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.setState({showModal:!1,pdfFiles:[]}),e){i.next=3;break}return i.abrupt("return");case 3:return t=j.a.Object.extend("folder"),a=new j.a.Query(t),i.next=7,L.a.awrap(a.get(e));case 7:return n=i.sent,l=j.a.Object.extend("pdfStore"),(r=new j.a.Query(l)).equalTo("parent",n),i.next=13,L.a.awrap(r.find());case 13:c=i.sent,this.setState({pdfFiles:c,showModal:!0});case 15:case"end":return i.stop()}}),null,this)}},{key:"handleClose",value:function(){this.setState({showNewPdfModal:!1})}},{key:"handleNewPdf",value:function(e){var t=this,a=new(j.a.Object.extend("pdfStore"));a.set("name",e.name),a.set("file",new j.a.File(e.file.file.name,e.file.file)),a.set("parent",e.parent),a.save().then((function(e){console.log("Pdf created",e),t.setState({pdfs:t.state.pdfs.concat(new F(e))})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.showNewPdfModal,n=t.pdfFiles,r=this.props,c=r.activeUser,i=r.handleLogout;if(!c)return l.a.createElement(E.a,{to:"/"});var o="";!0===this.state.showModal&&(o=l.a.createElement(f.a,{onClick:function(){e.setState({showNewPdfModal:!0})}},"Add PDF"));var s=n.map((function(e){return l.a.createElement("div",null,l.a.createElement("a",{href:e.get("file")._url,target:"_blank"},e.get("name")))}));return l.a.createElement("div",null,l.a.createElement(x,{activeUser:c,handleLogout:i}),l.a.createElement(P.a,null,l.a.createElement("div",{className:"docs-header"},l.a.createElement("h1",null,c.fname,"'s Documents storage")),l.a.createElement("div",{className:"tree"},l.a.createElement(U,{activeUser:c,handlePdf:this.handlePdf})),l.a.createElement("div",null,o,s)),l.a.createElement(M,{show:a,handlePdf:this.handlePdf,handleClose:this.handleClose,handleNewNode:this.handleNewNode}))}}]),t}(l.a.Component),Q=(a(761),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={activeUser:null},a.handleLogout=a.handleLogout.bind(Object(d.a)(a)),a.handleLogin=a.handleLogin.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleLogin",value:function(e){this.setState({activeUser:e})}},{key:"handleLogout",value:function(){this.setState({activeUser:null})}},{key:"render",value:function(){var e=this.state.activeUser;return l.a.createElement(w.a,null,l.a.createElement(E.d,null,l.a.createElement(E.b,{exact:!0,path:"/"},l.a.createElement(g,{activeUser:e,handleLogout:this.handleLogout})),l.a.createElement(E.b,{exact:!0,path:"/login"},l.a.createElement(k,{handleLogin:this.handleLogin})),l.a.createElement(E.b,{exact:!0,path:"/docs"},l.a.createElement(G,{activeUser:e,handleLogout:this.handleLogout}))))}}]),t}(l.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));j.a.serverURL="https://parseapi.back4app.com",j.a.initialize("h2N3mnez0o8lx8d1wruJFKqMsapy0CCSmiGk0OO3","6SMd5BpVty1wZQIMt0rhG03L7INNABB36s9GduB7"),c.a.render(l.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[333,1,2]]]);
//# sourceMappingURL=main.5a9fbee4.chunk.js.map